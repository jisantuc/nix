derivation {
  name = "filter";
  system = "@system@";
  builder = "@shell@";
  args = ["-e" "-x" (builtins.toFile "builder" "PATH=@testPath@; ln -s $input $out")];
  input =
    let filter = path: type: type != "symlink" && baseNameOf (toString path) != "foo";
    in builtins.filterSource filter ./test-tmp/filterin;
}
